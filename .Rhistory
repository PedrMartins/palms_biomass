site_class_percentage = (site_class_number/
site_all_number) *100
subset_data <- c(class[i], site_class_number,
site_class_percentage,
site_all_number)
}else {
subset_data <- site[site$altura_cm >= lower_bound &
site$altura_cm < upper_bound, ]
site_class_number=length(subset_data$altura_cm)
site_all_number= length(site$altura_cm)
site_class_percentage = (site_class_number/
site_all_number) *100
subset_data <- c(paste (class[i], class[i+1], sep= "_"),
site_class_number,
site_class_percentage,
site_all_number)
}
data_dap <- rbind(subset_data,data_dap)
}
colnames(data_dap) <- c("Class_Alt_cm","Ind_number",
"Ind_percentage",
"Total_ind")
}
}
result <- data_dap
}
if (choice==2){
if (length(class)==1) {
if (diametre_altura==2){
site_class<-  site [site$DAP_cm<class,]
site_class_number=sum (site_class$biomassa_fresca_g,
na.rm = TRUE)
#site_class_number=sum (site_class$biomass_seca_g, na.rm = TRUE) quando tiver o fator de correção
site_all_number= sum(site$biomassa_fresca_g,
na.rm = TRUE)
#site_class_number=sum (site$biomass_seca_g, na.rm = TRUE) quando tiver o fator de correção
site_class_percentage = (site_class_number/
site_all_number) *100
data_dap<- data.frame("Class_DAP_cm"=class,
"Biomass"=site_class_number,
"Biomass_percentage"=site_class_percentage,
"Total_biomass"=site_all_number)
data_biomass <- data_dap
}else {
browser()
site_class<-  site [site$altura_cm<class,]
site_class_number=sum (site_class$biomassa_fresca_g,
na.rm = TRUE)
#site_class_number=sum (site_class$biomass_seca_g, na.rm = TRUE) quando tiver o fator de correção
site_all_number= sum(site$biomassa_fresca_g,
na.rm = TRUE)
#site_class_number=sum (site$biomass_seca_g, na.rm = TRUE) quando tiver o fator de correção
site_class_percentage = (site_class_number/
site_all_number) *100
data_dap<- data.frame("Class_Alt_cm"=class,
"Biomass"=site_class_number,
"Biomass_percentage"=site_class_percentage,
"Total_biomass"=site_all_number)
data_biomass <- data_dap
}
} else {
if(diametre_altura==2){
data_biomass <- data.frame()
for (i in seq_along(class)){
if (i==1){
site_class<-  site [site$DAP_cm<class [1],]
site_class_biomass=sum(site_class$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(site_class$biomass_seca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(class[1],
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
data_biomass <- rbind(subset_data_bio,data_biomass)
}
lower_bound <- class[i]
upper_bound <- class[i + 1]
if (is.na(upper_bound)==TRUE) {
subset_data <- site[site$DAP_cm >= lower_bound,]
site_class_biomass=sum(subset_data$biomassa_fresca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(subset_data$biomass_seca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(class[i],
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
}else {
subset_data <- site[site$DAP_cm >= lower_bound &
site$DAP_cm < upper_bound, ]
site_class_biomass=sum(subset_data$biomassa_fresca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(subset_data$biomass_seca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(paste (class[i], class[i+1], sep= "_"),
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
}
data_biomass <- rbind(subset_data_bio,data_biomass)
}
colnames(data_biomass) <- c("Class_DAP_cm",
"Biomass_ab",
"Biomass_percentage",
"Total_ind")
}else{
data_biomass <- data.frame()
for (i in seq_along(class)){
if (i==1){
site_class<-  site [site$altura_cm<class [1],]
site_class_biomass=sum(site_class$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(site_class$biomass_seca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(class[1],
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
data_biomass <- rbind(subset_data_bio,data_biomass)
}
lower_bound <- class[i]
upper_bound <- class[i + 1]
if (is.na(upper_bound)==TRUE) {
subset_data <- site[site$altura_cm >= lower_bound,]
site_class_biomass=sum(subset_data$biomassa_fresca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(subset_data$biomass_seca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(class[i],
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
}else {
subset_data <- site[site$altura_cm >= lower_bound &
site$altura_cm < upper_bound, ]
site_class_biomass=sum(subset_data$biomassa_fresca_g, na.rm = TRUE)
site_all_biomass= sum(site$biomassa_fresca_g, na.rm = TRUE)
#site_class_biomass=sum(subset_data$biomass_seca_g, na.rm = TRUE)
#site_all_biomass= sum(site$biomass_seca_g, na.rm = TRUE)
site_biomass_percentage = (site_class_biomass/
site_all_biomass) *100
subset_data_bio <- c(paste (class[i], class[i+1], sep= "_"),
site_class_biomass,
site_biomass_percentage,
site_all_biomass)
}
data_biomass <- rbind(subset_data_bio,data_biomass)
}
colnames(data_biomass) <- c("Class_Alt_cm",
"Biomass_ab",
"Biomass_percentage",
"Total_ind")
}
}
result <- data_biomass
}
if (diametre_altura==2){result <- result %>%
mutate(across(-c(Class_DAP_cm), as.numeric))}else{result <- result %>%
mutate(across(-c(Class_Alt_cm), as.numeric))}
return (result)
}
class_DBH_alt (Biomass_palms_archontophoenix, dbh_alt = "alt",
class = c(5, 100),
choice = "bio")
library(readxl)
library(dplyr)
source("function.R")
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[3:7] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
Biomass_palms_archontophoenix
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
class_DBH_alt (Biomass_palms_archontophoenix, dbh_alt = "alt",
class = c(5, 100),
choice = "bio")
class_DBH_alt (Biomass_palms_archontophoenix,
class = 8)
class_DBH_alt (Biomass_palms_archontophoenix, class = c(5,15,50,150))
x <- class_DBH_alt (Biomass_palms_archontophoenix, class = c(5,15,50,150))
barplot(x$Ind_percentage)
y <- class_DBH_alt (Biomass_palms_archontophoenix, dbh_alt = "alt",
class = c(5, 100),
choice = "bio")
barplot(y$Biomass_percentage)
barplot(y$Biomass_ab)
y$Biomass_ab
barplot(y)
barplot(y$Class_Alt_cm)
y$Class_Alt_cm
boxplot(parcela~biomassa_fresca_g,data=Biomass_palms_archontophoenix)
names (Biomass_palms_archontophoenix)
boxplot(Parcela~biomassa_fresca_g,data=Biomass_palms_archontophoenix)
boxplot(biomassa_fresca_g~Parcela,data=Biomass_palms_archontophoenix)
boxplot(biomassa_fresca_g~Parcela,
data=Biomass_palms_archontophoenix, log ="y")
boxplot(biomassa_fresca_g~Transecto ,
data=Biomass_palms_archontophoenix, log ="y")
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
boxplot(biomassa_fresca_g~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
paste (Transecto, Parcela,
data=Biomass_palms_archontophoenix)
paste (Biomass_palms_archontophoenix$Transecto,
Biomass_palms_archontophoenix$Parcela,
sep="_")
Biomass_palms_archontophoenix$Transecto <-  paste (Biomass_palms_archontophoenix$Transecto,
Biomass_palms_archontophoenix$Parcela,
sep="_")
boxplot(biomassa_fresca_g~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
?barplot
barplot(biomassa_fresca_g~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
barplot(biomassa_fresca_g~Parcela,
data=Biomass_palms_archontophoenix, log ="y")
boxplot(biomassa_fresca_g~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
barplot(biomassa_fresca_g~Parcela,
data=Biomass_palms_archontophoenix, log ="y")
head (Biomass_palms_archontophoenix)
mean(Biomass_palms_archontophoenix$percentage_dry_biomass, na.rm = TRUE)
sd
qq
()
sd (Biomass_palms_archontophoenix$percentage_dry_biomass, na.rm= TRUE)
fator_de_correção <- mean(Biomass_palms_archontophoenix$percentage_dry_biomass,
na.rm = TRUE)
Biomass_palms_archontophoenix$biomass_seca_g_estimada <-
Biomass_palms_archontophoenix$biomassa_fresca_g * fator_de_correção
Biomass_palms_archontophoenix$biomass_seca_g_estimada
boxplot(biomass_seca_g_estimada~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
boxplot(biomass_seca_g_estimada~Transecto,
data=Biomass_palms_archontophoenix)
, log ="y"
boxplot(biomass_seca_g_estimada~Transecto,
data=Biomass_palms_archontophoenix, log ="y")
library(dplyr)
source("function.R")
source("function.R")
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
library(readxl)
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
?count
names (Biomass_palms_archontophoenix)
count (Biomass_palms_archontophoenix, Parcela)
ind_par <- count (Biomass_palms_archontophoenix, Parcela)
barplot(ind_par)
barplot(ind_par$n)
?barplot
barplot(ind_par$n, legend.text=ind_par$Parcela)
?barplot
?barplot(ind_par$n~ind_par$Parcela)
barplot(ind_par$n~ind_par$Parcela)
barplot(ind_par$n~ind_par$Parcela, weight=2)
barplot
?barplot
?barplot(ind_par$n~ind_par$Parcela, width=2)
barplot(ind_par$n~ind_par$Parcela, width=2)
ind_par <- count (Biomass_palms_archontophoenix,
Parcela, biomassa_fresca_g)
ind_par
Biomass_palms_archontophoenix|>
group_by(biomassa_fresca_g)
Biomass_palms_archontophoenix|>
group_by(biomassa_fresca_g, Parcela)
Biomass_palms_archontophoenix|>
group_by(biomassa_fresca_g, Parcela) |>
count(biomassa_fresca_g)
barplot(x$Ind_percentage)
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
Biomass_palms_archontophoenix$DAP_cm <- c(Biomass_palms_archontophoenix$DAP_mm/10)
str (Biomass_palms_archontophoenix)
Biomass_palms_archontophoenix$Transecto <-  paste (Biomass_palms_archontophoenix$Transecto,
Biomass_palms_archontophoenix$Parcela,
sep="_")
Biomass_palms_archontophoenix|>
group_by(biomassa_fresca_g, Parcela) |>
count(biomassa_fresca_g)
barplot(ind_par$n~ind_par$Parcela, width=2)
fator_de_correção <- mean(Biomass_palms_archontophoenix$percentage_dry_biomass,
na.rm = TRUE)
sd (Biomass_palms_archontophoenix$percentage_dry_biomass,
na.rm= TRUE)
Biomass_palms_archontophoenix$biomass_seca_g_estimada <-
Biomass_palms_archontophoenix$biomassa_fresca_g * fator_de_correção
x <- class_DBH_alt (Biomass_palms_archontophoenix, class = c(5,15,50,150))
class_DBH_alt (Biomass_palms_archontophoenix, class = c(1.5, 5), dbh_alt = "dbh")
ind_par <-  Biomass_palms_archontophoenix %>%
count(Parcela)
ind_par
barplot(ind_par$n~ind_par$Parcela, width=2)
mean(ind_par$n)
sd (ind_par$n)
ind_par <-  Biomass_palms_archontophoenix %>%
count(Transecto)
mean(ind_par$n)
ind_par
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
Biomass_palms_archontophoenix$DAP_cm <- c(Biomass_palms_archontophoenix$DAP_mm/10)
ind_par <-  Biomass_palms_archontophoenix %>%
count(Transecto)
mean(ind_par$n)
sd (ind_par$n)
barplot(ind_par$n~ind_par$Parcela, width=3)
ind_par <-  Biomass_palms_archontophoenix %>%
count(Parcela)
mean(ind_par$n)
sd (ind_par$n)
barplot(ind_par$n~ind_par$Parcela, width=3)
barplot(ind_par$n~ind_par$Parcela, width=3)
barplot(ind_par$n~ind_par$Parcela, width=1)
library(readxl)
library(dplyr)
source("function.R")
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
Biomass_palms_archontophoenix$DAP_cm <- c(Biomass_palms_archontophoenix$DAP_mm/10)
str (Biomass_palms_archontophoenix)
Biomass_palms_archontophoenix$Transecto <-  paste (Biomass_palms_archontophoenix$Transecto,
Biomass_palms_archontophoenix$Parcela,
sep="_")
ind_par <-  Biomass_palms_archontophoenix %>%
count(biomassa_fresca_g)
ind_par
View (ind_par)
barplot(ind_par$n~ind_par$biomassa_fresca_g, width=1)
mean(ind_par$n)
sd (ind_par$n)
round(ind_par$biomassa_fresca_g,1)
barplot(ind_par$n~round(ind_par$biomassa_fresca_g,1), width=1)
x <- round(ind_par$biomassa_fresca_g,1)
barplot(ind_par$n~x, width=1)
ind_par <-  Biomass_palms_archontophoenix %>%
count(round(ind_par$biomassa_fresca_g,1))
ind_par <-  Biomass_palms_archontophoenix %>%
count(altura_cm)
barplot(ind_par$n~ind_par$altura_cm, width=1)
mean(ind_par$n)
sd (ind_par$n)
ind_par <-  Biomass_palms_archontophoenix %>%
count(Parcela)
barplot(ind_par$n~ind_par$Parcela, width=1)
View (ind_par)
ind_par <-  Biomass_palms_archontophoenix %>%
count(Transecto)
barplot(ind_par$n~ind_par$Transecto, width=1)
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
Biomass_palms_archontophoenix$DAP_cm <- c(Biomass_palms_archontophoenix$DAP_mm/10)
Biomass_palms_archontophoenix$Transecto_Parcela <-  paste (Biomass_palms_archontophoenix$Transecto,
Biomass_palms_archontophoenix$Parcela,
sep="_")
ind_par <-  Biomass_palms_archontophoenix %>%
count(Transecto)
barplot(ind_par$n~ind_par$Transecto, width=1)
x <- class_DBH_alt (Biomass_palms_archontophoenix, class = c(5,15,50,150))
x
y <- class_DBH_alt (Biomass_palms_archontophoenix, dbh_alt = "alt",
class = c(5, 100),
choice = "bio")
y
barplot(Clasd_Alt_cm ~ Biomass_ab, data = Biomass_palms_archontophoenix)
y
barplot(Clasd_Alt_cm ~ Biomass_ab, data = y)
barplot(y$Clasd_Alt_cm ~ y$Biomass_ab)
barplot(y$Biomass_ab)
y
y <- class_DBH_alt (Biomass_palms_archontophoenix, dbh_alt = "alt",
class = c(5,15,30,50,150,200),
choice = "bio")
barplot(y$Biomass_ab)
y
library(readxl)
library(dplyr)
source("function.R")
Biomass_palms_archontophoenix<- read_excel("biomass_data_matinha_USP.xlsx")
names (Biomass_palms_archontophoenix)[4:8] <-  c("DAP_mm", "altura_cm",
"biomassa_fresca_g",
"biomass_seca_g",
"percentage_dry_biomass")
# Example data (your table)
df <- data.frame(
Class_DAP = c("10", "10", "10_30", "10_30", "30_50", "30_50", "50", "50"),
Distri = c("Trop", "Temp", "Trop", "Temp", "Trop", "Temp", "Trop", "Temp"),
Biomass_ab = c(5236.851, 5164.551, 16575.309, 26234.969,
1430.541, 46840.402, 0.000, 39230.401)
)
# If we had replicates, group means and standard errors
agg <- aggregate(Biomass_ab ~ Class_DAP + Distri, data=df,
FUN=function(x) c(mean=mean(x), se=sd(x)/sqrt(length(x))))
# Expand matrix into columns
agg2 <- data.frame(
Class_DAP = agg$Class_DAP,
Distri = agg$Distri,
Mean = agg$Biomass_ab[, "mean"],
SE = agg$Biomass_ab[, "se"]
)
# Colors for Trop vs Temp
cols <- c("Trop"="sandybrown", "Temp"="lightgreen")
# Barplot (base R)
bp <- barplot(height=agg2$Mean,
beside=TRUE,
names.arg=paste(agg2$Class_DAP, agg2$Distri, sep="\n"),
col=cols[agg2$Distri],
ylim=c(0, max(agg2$Mean+agg2$SE)*1.1),
ylab="Mean Biomass",
main="Biomass by DBH Class and Distribution")
# Add error bars
arrows(x0=bp, y0=agg2$Mean-agg2$SE,
x1=bp, y1=agg2$Mean+agg2$SE,
angle=90, code=3, length=0.05)
# Barplot (base R)
bp <- barplot(height=agg2$Mean,
beside=TRUE,
names.arg=paste(agg2$Class_DAP, agg2$Distri, sep="\n"),
col=cols[agg2$Distri],
ylim=c(0, max(agg2$Mean+agg2$SE)*1.1),
ylab="Mean Biomass",
main="Biomass by DBH Class and Distribution")
agg2$Mean+agg2$SE
# Example data (your table)
df <- data.frame(
Class_DAP = c("10", "10", "10_30", "10_30", "30_50", "30_50", "50", "50"),
Distri = c("Trop", "Temp", "Trop", "Temp", "Trop", "Temp", "Trop", "Temp"),
Biomass_ab = c(5236.851, 5164.551, 16575.309, 26234.969,
1430.541, 46840.402, 0.000, 39230.401)
)
# If we had replicates, group means and standard errors
agg <- aggregate(Biomass_ab ~ Class_DAP + Distri, data=df,
FUN=function(x) c(mean=mean(x), se=sd(x)/sqrt(length(x))))
agg
mean=mean(x)
# Expand matrix into columns
agg2 <- data.frame(
Class_DAP = agg$Class_DAP,
Distri = agg$Distri,
Mean = agg$Biomass_ab[, "mean"],
SE = agg$Biomass_ab[, "se"]
)
agg2
# If we had replicates, group means and standard errors
agg <- aggregate(Biomass_ab ~  Distri, data=df,
FUN=function(x) c(mean=mean(x), se=sd(x)/sqrt(length(x))))
agg
# Expand matrix into columns
agg2 <- data.frame(,
Distri = agg$Distri,
Mean = agg$Biomass_ab[, "mean"],
SE = agg$Biomass_ab[, "se"]
)
# Expand matrix into columns
agg2 <- data.frame(
Distri = agg$Distri,
Mean = agg$Biomass_ab[, "mean"],
SE = agg$Biomass_ab[, "se"]
)
agg2
# Colors for Trop vs Temp
cols <- c("Trop"="sandybrown", "Temp"="lightgreen")
# Barplot (base R)
bp <- barplot(height=agg2$Mean,
beside=TRUE,
names.arg= agg2$Distri,
col=cols[agg2$Distri],
ylim=c(0, max(agg2$Mean+agg2$SE)*1.1),
ylab="Mean Biomass",
main="Biomass by DBH Class and Distribution")
# Add error bars
arrows(x0=bp, y0=agg2$Mean-agg2$SE,
x1=bp, y1=agg2$Mean+agg2$SE,
angle=90, code=3, length=0.05)
